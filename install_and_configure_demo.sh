#!/bin/bash
echo ""
echo ""
echo ""
echo ""
echo ""
echo ""
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo ""
echo "****************** This is the main script for full-stack automation demo. *********************"
echo "************** It will call installation main script and demo config main script. **************"
echo "******** After script finish (around 30 minutes) you should see 12 containers running **********"
echo "***** Maybe you need to wait some time (~ 10 minutes) so CI/CD starts API and UI container *****"
echo "****************** After that you can access the UI using http://[HOST_IP] *********************"
echo ""
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo "################################################################################################"
echo ""
echo ""
echo ""
echo ""
echo ""
sleep 5

INSTALL_GITLAB="y"
if [ $# -ne 0 ]; then
    INSTALL_GITLAB=$1
fi


if [ "$INSTALL_GITLAB" == "" ]; then
    read -p "Want to install gitlab ([y]/n)? Answer 'no' if you would like to use an existing one: " INSTALL_GITLAB
fi


cd installation
/bin/bash install_fullstack_automation_demo.sh $INSTALL_GITLAB
sleep 60
cd ../demo
/bin/bash configure_fullstack_automation_demo.sh